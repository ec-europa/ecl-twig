{% spaceless %}

{#
  Parameters:
  - "sections" (array) (default: []):
    - "key" (string) (default: '')
    - "title" (optional) (string) (default: '') OR (optional) (object) (default: {}):
      - "label" (string) (default: '')
      - "href" (string) (default: '')
    - "title_class_name" (optional) (string) (default: '')
    - "description" (optional) (string) (default: '')
    - "content_before" (optional) (string) (default: '')
    - "list_class_name" (optional) (string) (default: '')
    
    - "links" (optional) (array of objects) (default: []):
      - "label" (string) (default: '')
      - "href" (string) (default: '')
      - "icon_position" (optional) (string) (default: '')
      - "icon" (optional) (object) (default: {}):
        - "shape" (string) (default: '')
        - "size" (string) (default: '')
#}

{# Internal properties #}
{% set _sections = sections|default([]) %}

{% set _css_class = 'ecl-footer-standardised' %}
{% set _extra_attributes = '' %}

{# Internal logic - Process properties #}

{% if extra_classes is defined and extra_classes is not empty %}
  {% set _css_class = _css_class ~ ' ' ~ extra_classes %}
{% endif %}

{% if extra_attributes is defined and extra_attributes is not empty and extra_attributes is iterable %}
  {% for attr in extra_attributes %}
    {% if attr.value is defined %}
      {% set _extra_attributes = _extra_attributes ~ ' ' ~ attr.name ~ '="' ~ attr.value ~ '"' %}
    {% else %}
      {% set _extra_attributes = _extra_attributes ~ ' ' ~ attr.name %}
    {% endif %}
  {% endfor %}
{% endif %}

{# Print the result #}

<footer class="{{ _css_class }}"{{ _extra_attributes|raw }}>
  {# Back to top #}
 
  {% set _back_to_top = back_to_top|default({}) %}
  {% include '../ec-component-link/link.html.twig' with _back_to_top|merge({
    link: _back_to_top.link|default({})|merge({
      type: 'standalone',
      icon_position: 'after',
    }),
    icon: _back_to_top.icon|default({})|merge({
      type: 'ui',
      name: 'corner-arrow',
    }),
    extra_classes: 'ecl-footer__back-to-top'
  }) only %}
  

  {# Main container #}
  <div class="ecl-container {{ _css_class ~ '__container'}}">
    {% for section in _sections %}
      {# Section #}
      <div class="{{ _css_class ~ '__section'}} {{ _css_class ~ '__section' ~ loop.index }}">
        {# content before #}
        {% if  section.content_before is defined and section.content_before is not empty %} 
         <div class="{{ _css_class ~ '__content'}}">{{ section.content_before|e }}</div>
        {% endif %} 
        {# title #}
        {% if  section.title is defined and section.title is not empty %} 
          {% if  section.title is iterable %} 
              {% include '../ec-component-link/link.html.twig' with {
                link: section.title|merge({ type: 'standalone', path: section.title.href }),
                extra_classes:  _css_class ~ '__title', } only %}
              {# description #}
               {% if section.description is defined and section.description is not empty  %} 
              <div class="{{ _css_class ~ '__description'}}">{{ section.description|e }}</div>
        {% endif %} 
        {% else %} 
            <div class="{{ _css_class ~ '__title' }} {{ section.title_class_name }}">{{ section.title }}</div>
        {% endif %}
      {% endif %}
      {# list #}
      {% if  section.links is defined and section.links is not empty %} 
        <ul class="{{ _css_class ~ '__list'}} {{ section.list_class_name }}">
          {% for link in section.links %}
            <li class="{{ _css_class ~ '__list-item'}}">
               {% if ( link.icon is defined and link.icon is not empty )%}
                 {% include '../ec-component-link/link.html.twig' with {
                    link: link|merge({  
                      type: 'standalone',
                      path:link.href,
                      icon_position: link.icon_position|default('after'),
                    }),
                    icon:link.icon|merge({
                      path:'static/media/icons.a11fa655.svg',
                      name: link.icon.shape,
                      size: link.icon.size,
                    }),
                    extra_classes:  _css_class ~ '__link ecl-link--icon ecl-link--icon-before', 
                  } only %}
               {% else %}
              
                 {% include '../ec-component-link/link.html.twig' with {
                    link: link|merge({ 
                      type: 'standalone',
                      path:link.href,
                    }),
                    extra_classes:  _css_class ~ '__link',
                    } only %}
               {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
    {% endfor %}
  </div>
</footer>

{% endspaceless %}


