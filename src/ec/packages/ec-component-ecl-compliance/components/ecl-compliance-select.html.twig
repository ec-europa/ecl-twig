{#
  Parameters:
    id:_id,
    options: (array of objects),
    disabled: (boolean),
    invalid: (boolean),
    required: (boolean),
    name: (string),
    icon_path: (string),
    invalid_text: (string),
    required_text: (string),
    optional_text: (string),
    label: (string)
#}

{% extends "@ecl-twig/ec-component-ecl-compliance/ecl-compliance.html.twig" %}
{% set component = 'select' %}
{% include "@ecl-twig/ec-component-ecl-compliance/components/ecl-compliance-form-group.html.twig" with {
    invalid: invalid,
    required: required,
    label: label,
    invalid_text: invalid_text,
    optional_text: optional_text,
    required_text: required_text,
    component: component
 } only %}

{% set message = '' %}
{% set invalid_option_case = false %}
{% set no_options_case = options is not defined or options is empty %}
{% if no_options_case == false %}
  {% for option in options %}
    {% if (option.label is not defined or option.label is empty) or
      (option.value is not defined or option.value is empty) %}
      {% set invalid_option_case = true %}
    {% endif %}
  {% endfor %}
{% endif %}

{% set not_compliant = no_options_case or invalid_option_case %}

{% if no_options_case %}
  {% set message = '"options" needs to contain at least one valid option (with a label and a value).' %}
{% endif %}
{% if invalid_option_case %}
  {% set message = message ~ ' Each option needs to contain a "label" and a "value".' %}
{% endif %}

