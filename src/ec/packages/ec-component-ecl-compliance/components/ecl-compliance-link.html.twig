{#
  Parameters:
  - "link" (object)
  - "icon" (object)
  - "icon_path" (string)
#}

{% extends "@ecl-twig/ec-component-ecl-compliance/ecl-compliance.html.twig" %}

{% set component = 'link' %}
{% if link.type %}
  {% set variant = link.type %}
{% endif %}

{% if icon_path is empty and
  (icon is defined and icon is not empty and icon is iterable) and
  (icon[0].path is defined and icon[0].path is not empty) %}
  {% set icon_path = icon[0].path %}
{% endif %}

{% set not_compliant =
  (link.label is not defined or link.label is empty) and (
    (link.icon_position is not defined or link.icon_position is empty) or
    (icon[0].name is not defined or icon[0].name is empty) or
    (icon[0].type is not defined or icon[0].type is empty) or
    (icon[0].path is not defined or icon[0].path is empty)
  ) %}

{% set message = '{{ link.label }} and none of {{ link.icon_position }}, {{ icon.name }}, {{ icon.path }} or {{ icon.type }} can be empty at the same time, an unusable link would be generated otherwise' %}
