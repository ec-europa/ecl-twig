# Stories

| Status        | accepted <!--becomes accepted, rejected or superseded later--> |
| ------------- | -------------------------------------------------------------- |
| **Proposed**  | 2020-01-19                                                     |
| **Accepted**  | 2020-03-19                                                     |
| **Driver**    | @planctus                                                      |
| **Approver**  | @kalinchernev, @papegaill                                      |
| **Consulted** | @kalinchernev, @emeryro, @kalinchernev, @papegaill, @pgingao   |
| **Informed**  | contributors, consumers                                        |

## Decision

In order to provide a complete representation of the information used to render a component, interactive fields as `knobs` should be made available in storybook for the user to read and edit all the properties currently used in the demo.
The result of the changes made though the knobs should be reflected every time in the example provided in the `notes` tab in the form of a valid twig include code.

### Knobs

#### Labelling

The label of the knobs are defined in the same way the properties are accessible in the expected input data.
Ex: `link.icon.path`

#### Grouping

Knobs are grouped together to simplify their usage, the available groups are "mandatory", "optional", "use cases", "status".

`Mandatory` and `optional` are directly related to the ecl usage page for a certain component.
In a dynamic scenario, like the storybook demo for a component is, the group a knob is associated to might need to be switched, basing on other selections performed by the user.

`Use cases` is only used in those component representing "layout elements", ex: "site headers" where entire blocks of html can be removed as they are optional, in this case we offer a simple button to show/hide the element.
_warning_ To be avoided when when not really needed, the operation performed by these buttons overlaps the work by the knobs and it's not immediately reflected by them creating a flaw in the user experience.

`states` is mainly used for form elements, where the properties are booleans defining togglers for statuses, ex: "required", "disabled".

#### Edge cases

In some cases ex: "icons-sprite, path-to-the-logo" there is no real advantage for the user in editing the value used in the demo we provide, therefore we only offer the possibility of unsetting its value, simply defining a select knob with two values: "none" and the current value being used.

Ex:`data.button.icon.path = select( 'button.icon.path', ['none', button.icon.path], button.icon.path );`

#### Conditional knobs

In order to offer a "contextual" experience to the users of the library, in some cases knobs can be conditionally defined, meaning that they might appear or disappear as their relevance changes following some change in the data:
Ex: `const attribute1Name = text( 'extra_attributes[0].name', '', tabLabels.optional ); // First attribute. if (attribute1Name !== '') { data.extra_attributes = []; let attribute = {}; const attribute1Value = text( 'extra_attributes[0].value', '', tabLabels.optional ); const attribute2Name = text( 'extra_attributes[1].name', '', tabLabels.optional ); ...`
in this case we represent the extra*attributes (array) where we would need 4 knobs for defining two attributes as one single text field, when it's filled by the user the corresponding knob for the "value" of the first attribute appears together with a knob for setting a second attribute name.
\_warning* Use this approach very carefully, the user experience it creates might be confusing in many cases.

### Notes tab

The notes tab in ecl-twig contains the documentation for a component and a dynamic representation of the current input data in the form of a valid twig include code, altering the data via the knobs also alters the include provided in the `notes` tab.

## Context

Stories are the way we demo a component in storybook.
Through each story we also offer additional information related to the component:

- "knobs" to let the user interact with it and alter the data used to render it
- "notes" where to read the documentation and have access to an example of the twig include code.

### Concrete actions

Here's the plan to follow:

1. The developer defines a story for a component including:

- knobs for every property sent to the component via user input
- groups for knobs, mandatory and optional are always going to be present, use cases and states are exceptional.
- a json parameter containing the data object for the notes tab
